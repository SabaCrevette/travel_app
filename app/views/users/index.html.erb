<section class="text-gray-600 body-font">
  <div class="container mx-auto flex px-5 py-24 items-center justify-center flex-col">
    <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900">マイページ</h1>

<% prefectures = [
  "hokkaido", "aomori"
] %>

<!-- 
, "aomori", "iwate", "miyagi", "akita",
  "yamagata", "fukushima", "ibaraki", "tochigi",
  "gunma", "saitama", "chiba", "tokyo", "kanagawa",
  "niigata", "toyama", "ishikawa", "fukui", "yamanashi",
  "nagano", "gifu", "shizuoka", "aichi", "mie",
  "shiga", "kyoto", "osaka", "hyogo", "nara",
  "wakayama", "tottori", "shimane", "okayama", "hiroshima",
  "yamaguchi", "tokushima", "kagawa", "ehime", "kochi",
  "fukuoka", "saga", "nagasaki", "kumamoto", "oita",
  "miyazaki", "kagoshima", "okinawa"
image_tag 'prefectures/01_hokkaido.png', class: 'w-[300px] h-[200px]'
-->

<!-- # このコードでは image_tag を使用しています %>
<% prefectures.each_with_index do |prefecture_name, index| %>
  <% prefecture_id = index + 1 %>
  <% user_prefecture = @user_prefectures.find { |up| up.prefecture_id == prefecture_id } %>
  <% post_count = user_prefecture ? user_prefecture.post_count : 0 %>
  <% count_class = post_count >= 4 ? ".bg-count-4" : "bg-count-#{post_count}" %>
  <%= image_tag "prefectures/#{prefecture_id.to_s.rjust(2, '0')}_#{prefecture_name}.svg", class: "#{count_class} w-[300px] h-[200px]" %>
<% end %>
-->


<% prefectures.each_with_index do |prefecture_name, index| %>
  <% prefecture_id = index + 1 %>
  <% user_prefecture = @user_prefectures.find { |up| up.prefecture_id == prefecture_id } %>
  <% post_count = user_prefecture ? user_prefecture.post_count : 0 %>
  <% count_class = post_count >= 4 ? "bg-count-4" : "bg-count-#{post_count}" %>

  <% # SVGデータのパスを設定します %>
  <% svg_filename = "#{prefecture_id.to_s.rjust(2, '0')}_#{prefecture_name}.svg" %>
  <% svg_path = Rails.root.join("app", "assets", "images", "prefectures", svg_filename) %>
  <% if File.exist?(svg_path) %>
    <% svg_data = File.read(svg_path) %>
    <% # SVGデータを安全にHTMLに埋め込むためには `raw` ヘルパーまたは `html_safe` を使用します %>
    <% updated_svg_data = svg_data.gsub('<path', "<path class=\"#{count_class}\"") %>
    <%= raw(updated_svg_data).html_safe %>
  <% else %>
    <% # SVGファイルが見つからない場合は代替テキストや画像を表示 %>
    <p>SVGファイルが見つかりません。</p>
  <% end %>
<% end %>

<!-- インラインSVG
<% prefectures.each_with_index do |prefecture_name, index| %>
  <% prefecture_id = index + 1 %>
  <% user_prefecture = @user_prefectures.find { |up| up.prefecture_id == prefecture_id } %>
  <% post_count = user_prefecture ? user_prefecture.post_count : 0 %>
  <% count_class = post_count >= 4 ? "bg-count-4" : "bg-count-#{post_count}" %>
  
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 200.93 180.99" class="w-32 h-32">
    <defs>
      <clipPath id="clippath">
        <rect x=".55" width="200.38" height="180.99"/>
      </clipPath>
    </defs>
    <g>
      <path class="<%= count_class %> " d="省略"/>
    </g>
  </svg>
<% end %>
-->

    <div class="text-center lg:w-2/3 w-full">
      <p class="mb-8 leading-relaxed">現在の踏破状況</p>
      <div class="flex justify-center">
        <button class="inline-flex text-white bg-red-500 border-0 py-2 px-6 focus:outline-none hover:bg-red-600 rounded text-lg">削除</button>
        <button class="ml-4 inline-flex text-gray-700 bg-gray-100 border-0 py-2 px-6 focus:outline-none hover:bg-gray-200 rounded text-lg">登録</button>
      </div>
    </div>
  </div>
</section>

<div class="container mx-auto px-4">
  <div class="grid grid-cols-2 gap-4 mx-auto max-w-lg rounded-lg"> <!-- mx-auto max-w-lg rounded-lg border -->
    <button class="btn btn-primary col-span-2 sm:col-span-1 max-w-xs">投稿する</button>
    <button class="btn btn-secondary col-span-2 sm:col-span-1 max-w-xs">他の人の投稿を見る</button>
    <button class="btn btn-accent col-span-2 sm:col-span-1 max-w-xs">ランキング</button>
    <%= link_to 'ブックマーク', bookmarks_posts_path, class: 'btn btn-ghost col-span-2 sm:col-span-1 max-w-xs', role: "button" %>
  </div>
</div>

<!-- =begin サンプル
<div class="container mx-auto px-4">
  <div class="grid grid-cols-2 gap-4">
    <button class="btn btn-primary col-span-2 sm:col-span-1">投稿する</button>
    <button class="btn btn-secondary col-span-2 sm:col-span-1">他の人の投稿を見る</button>
    <button class="btn btn-accent col-span-2 sm:col-span-1">ランキング</button>
    <button class="btn btn-ghost col-span-2 sm:col-span-1">ブックマーク</button>
  </div>
</div>
= end -->


<section class="text-gray-600 body-font">
  <div class="container px-5 py-24 mx-auto">
    <div class="flex flex-col">
      <div class="h-1 bg-gray-200 rounded overflow-hidden">
        <div class="w-24 h-full "></div>
      </div>
      <div class="flex flex-wrap sm:flex-row flex-col py-6 mb-12">
        <h1 class="sm:w-2/5 text-gray-900 font-medium title-font text-2xl mb-2 sm:mb-0">さばの投稿一覧</h1>
        <p class="sm:w-3/5 leading-relaxed text-base sm:pl-10 pl-0">Street art subway tile salvia four dollar toast bitters selfies quinoa yuccie synth meditation iPhone intelligentsia prism tofu. Viral gochujang bitters dreamcatcher.</p>
      </div>
    </div>
    <div class="flex flex-wrap sm:-m-4 -mx-4 -mb-10 -mt-4">
      <div class="p-4 md:w-1/3 sm:mb-0 mb-6">
        <div class="rounded-lg h-64 overflow-hidden">
          <img alt="content" class="object-cover object-center h-full w-full" src="https://dummyimage.com/1203x503">
        </div>
        <h2 class="text-xl font-medium title-font text-gray-900 mt-5">Shooting Stars</h2>
        <p class="text-base leading-relaxed mt-2">Swag shoivdigoitch literally meditation subway tile tumblr cold-pressed. Gastropub street art beard dreamcatcher neutra, ethical XOXO lumbersexual.</p>
        <span class="inline-flex">
          <a class="text-gray-500">
            <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
              <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
            </svg>
          </a>
          <a class="ml-2 text-gray-500">
            <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
              <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path>
            </svg>
          </a>
          <a class="ml-2 text-gray-500">
            <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
              <path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"></path>
            </svg>
          </a>
        </span>
        <a class="text-pink-500 inline-flex items-center mt-3">Learn More
          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-2" viewBox="0 0 24 24">
            <path d="M5 12h14M12 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
      <div class="p-4 md:w-1/3 sm:mb-0 mb-6">
        <div class="rounded-lg h-64 overflow-hidden">
          <img alt="content" class="object-cover object-center h-full w-full" src="https://dummyimage.com/1204x504">
        </div>
        <h2 class="text-xl font-medium title-font text-gray-900 mt-5">The Catalyzer</h2>
        <p class="text-base leading-relaxed mt-2">Swag shoivdigoitch literally meditation subway tile tumblr cold-pressed. Gastropub street art beard dreamcatcher neutra, ethical XOXO lumbersexual.</p>
        <a class="text-pink-500 inline-flex items-center mt-3">Learn More
          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-2" viewBox="0 0 24 24">
            <path d="M5 12h14M12 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
      <div class="p-4 md:w-1/3 sm:mb-0 mb-6">
        <div class="rounded-lg h-64 overflow-hidden">
          <img alt="content" class="object-cover object-center h-full w-full" src="https://dummyimage.com/1205x505">
        </div>
        <h2 class="text-xl font-medium title-font text-gray-900 mt-5">The 400 Blows</h2>
        <p class="text-base leading-relaxed mt-2">Swag shoivdigoitch literally meditation subway tile tumblr cold-pressed. Gastropub street art beard dreamcatcher neutra, ethical XOXO lumbersexual.</p>
        <a class="text-pink-500 inline-flex items-center mt-3">Learn More
          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-2" viewBox="0 0 24 24">
            <path d="M5 12h14M12 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>